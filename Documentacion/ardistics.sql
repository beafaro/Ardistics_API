CREATE DATABASE ardistics;
USE ardistics;

CREATE TABLE arduinos (
	id_arduino INT NOT NULL AUTO_INCREMENT,
    nombre_arduino VARCHAR(50) NOT NULL,
    num_pines INT,
    PRIMARY KEY (id_arduino)
);

CREATE TABLE dato_arduino (
	id_dato INT NOT NULL AUTO_INCREMENT,
    id_arduino INT,
    num_pin INT,
    valor BOOLEAN,
    fecha DATETIME,
    PRIMARY KEY (id_dato),
    FOREIGN KEY (id_arduino) 
		REFERENCES arduinos(id_arduino)
        ON DELETE CASCADE
);

INSERT INTO arduinos (nombre_arduino, num_pines) VALUES 
						("Sistemas eléctricos y calefacción", 2), 
                        ("Control de acceso", 1);



INSERT INTO dato_arduino (id_arduino, num_pin, valor, fecha) VALUES 
							(1, 0, true, '2022-11-23 12:45:56'), (1, 0, false, '2022-11-23 12:46:56'), 
							(1, 0, true, '2022-11-23 13:45:56'), (1, 0, false, '2022-11-23 13:48:56'),
                            (1, 0, true, '2022-11-23 14:45:56'), (1, 0, false, '2022-11-23 14:47:56'),
                            
							(1, 0, true, '2022-11-24 12:45:56'), (1, 0, false, '2022-11-24 12:46:56'), 
							(1, 0, true, '2022-11-24 13:45:56'), (1, 0, false, '2022-11-24 13:46:56'),
                            (1, 0, true, '2022-11-24 14:45:56'), (1, 0, false, '2022-11-24 14:47:56'),
                            (1, 0, true, '2022-11-24 15:45:56'), (1, 0, false, '2022-11-24 15:46:56'),
                            (1, 0, true, '2022-11-24 16:45:56'), (1, 0, false, '2022-11-24 16:49:56'),
                            
							(1, 0, true, '2022-11-25 12:45:56'), (1, 0, false, '2022-11-25 12:46:56'), 
							(1, 0, true, '2022-11-25 13:45:56'), (1, 0, false, '2022-11-25 13:49:56'),
                            (1, 0, true, '2022-11-25 14:45:56'), (1, 0, false, '2022-11-25 14:46:56'),
                            (1, 0, true, '2022-11-25 15:45:56'), (1, 0, false, '2022-11-25 15:47:56'),
                            (1, 0, true, '2022-11-25 16:45:56'), (1, 0, false, '2022-11-25 16:46:56'),
                            (1, 0, true, '2022-11-25 17:45:56'), (1, 0, false, '2022-11-25 17:51:56'),
                            (1, 0, true, '2022-11-25 18:45:56'), (1, 0, false, '2022-11-25 18:46:56'),
                            
							(1, 0, true, '2022-11-26 12:45:56'), (1, 0, false, '2022-11-26 12:46:56'), 
							(1, 0, true, '2022-11-26 13:45:56'), (1, 0, false, '2022-11-26 13:48:56'),
                            
							(1, 0, true, '2022-11-27 12:45:56'), (1, 0, false, '2022-11-27 12:46:56'), 
							(1, 0, true, '2022-11-27 13:45:56'), (1, 0, false, '2022-11-27 13:48:56'),
                            (1, 0, true, '2022-11-27 14:45:56'), (1, 0, false, '2022-11-27 14:46:56'),
                            (1, 0, true, '2022-11-27 15:45:56'), (1, 0, false, '2022-11-27 15:46:56'),
                            (1, 0, true, '2022-11-27 16:45:56'), (1, 0, false, '2022-11-27 16:47:56'),
                            (1, 0, true, '2022-11-27 17:45:56'), (1, 0, false, '2022-11-27 17:46:56'),
                            (1, 0, true, '2022-11-27 18:45:56'), (1, 0, false, '2022-11-27 18:49:56'),
                            (1, 0, true, '2022-11-27 19:45:56'), (1, 0, false, '2022-11-27 19:46:56'),
                            (1, 0, true, '2022-11-27 20:45:56'), (1, 0, false, '2022-11-27 20:52:56'),
                            
							(1, 0, true, '2022-11-28 12:45:56'), (1, 0, false, '2022-11-28 12:46:56'), 
							(1, 0, true, '2022-11-28 13:45:56'), (1, 0, false, '2022-11-28 13:46:56'),
                            (1, 0, true, '2022-11-28 14:45:56'), (1, 0, false, '2022-11-28 14:47:56'),
                            (1, 0, true, '2022-11-28 15:45:56'), (1, 0, false, '2022-11-28 15:46:56'),
                            (1, 0, true, '2022-11-28 16:45:56'), (1, 0, false, '2022-11-28 16:49:56'),
                            
							(1, 0, true, '2022-11-29 12:45:56'), (1, 0, false, '2022-11-29 12:46:56'), 
							(1, 0, true, '2022-11-29 13:45:56'), (1, 0, false, '2022-11-29 13:49:56'),
                            (1, 0, true, '2022-11-29 14:45:56'), (1, 0, false, '2022-11-29 14:50:56'),
                            (1, 0, true, '2022-11-29 15:45:56'), (1, 0, false, '2022-11-29 15:47:56'),
                            (1, 0, true, '2022-11-29 16:45:56'), (1, 0, false, '2022-11-29 16:46:56'),
                            (1, 0, true, '2022-11-29 17:45:56'), (1, 0, false, '2022-11-29 17:51:56'),
                            (1, 0, true, '2022-11-29 18:45:56'), (1, 0, false, '2022-11-29 18:46:56');
                            
INSERT INTO dato_arduino (id_arduino, num_pin, valor, fecha) VALUES	(1, 0, true, '2022-11-29 19:45:56');


INSERT INTO dato_arduino (id_arduino, num_pin, valor, fecha) VALUES 
							(1, 1, true, '2022-11-26 07:45:56'), (1, 1, false, '2022-11-26 07:46:56'), 
							(1, 1, true, '2022-11-26 08:45:56'), (1, 1, false, '2022-11-26 08:50:56'), 
							(1, 1, true, '2022-11-26 09:45:56'), (1, 1, false, '2022-11-26 09:50:56'), 
							(1, 1, true, '2022-11-26 10:45:56'), (1, 1, false, '2022-11-26 10:50:56'), 
							(1, 1, true, '2022-11-26 11:45:56'), (1, 1, false, '2022-11-26 11:55:56'), 
							(1, 1, true, '2022-11-26 15:45:56'), (1, 1, false, '2022-11-26 15:55:56'), 
							(1, 1, true, '2022-11-26 16:45:56'), (1, 1, false, '2022-11-26 16:46:56'), 
							(1, 1, true, '2022-11-26 17:45:56'), (1, 1, false, '2022-11-26 17:55:56'), 
							(1, 1, true, '2022-11-26 18:45:56'), (1, 1, false, '2022-11-26 18:50:56'), 
                            
                            
							(1, 1, true, '2022-11-27 07:45:56'), (1, 1, false, '2022-11-27 07:46:56'), 
							(1, 1, true, '2022-11-27 08:45:56'), (1, 1, false, '2022-11-27 08:50:56'), 
							(1, 1, true, '2022-11-27 09:45:56'), (1, 1, false, '2022-11-27 09:50:56'), 
							(1, 1, true, '2022-11-27 10:45:56'), (1, 1, false, '2022-11-27 10:50:56'), 
							(1, 1, true, '2022-11-27 11:45:56'), (1, 1, false, '2022-11-27 11:55:56'),
                            
                            
							(1, 1, true, '2022-11-28 07:45:56'), (1, 1, false, '2022-11-28 07:46:56'), 
							(1, 1, true, '2022-11-28 08:45:56'), (1, 1, false, '2022-11-28 08:50:56'), 
							(1, 1, true, '2022-11-28 09:45:56'), (1, 1, false, '2022-11-28 09:50:56'), 
							(1, 1, true, '2022-11-28 10:45:56'), (1, 1, false, '2022-11-28 10:50:56'), 
							(1, 1, true, '2022-11-28 11:45:56'), (1, 1, false, '2022-11-28 11:55:56'),
                            
                            
							(1, 1, true, '2022-11-29 07:45:56'), (1, 1, false, '2022-11-29 07:46:56'), 
							(1, 1, true, '2022-11-29 08:45:56'), (1, 1, false, '2022-11-29 08:50:56'), 
							(1, 1, true, '2022-11-29 09:45:56'), (1, 1, false, '2022-11-29 09:50:56'), 
							(1, 1, true, '2022-11-29 10:45:56'), (1, 1, false, '2022-11-29 10:50:56'), 
							(1, 1, true, '2022-11-29 11:45:56'), (1, 1, false, '2022-11-29 11:55:56'), 
							(1, 1, true, '2022-11-29 15:45:56'), (1, 1, false, '2022-11-29 15:55:56'), 
                            
                            
							(1, 1, true, '2022-11-30 07:45:56'), (1, 1, false, '2022-11-30 07:46:56'), 
							(1, 1, true, '2022-11-30 08:45:56'), (1, 1, false, '2022-11-30 08:50:56'), 
							(1, 1, true, '2022-11-30 09:45:56'), (1, 1, false, '2022-11-30 09:51:56'), 
							(1, 1, true, '2022-11-30 10:45:56'), (1, 1, false, '2022-11-30 10:50:56'), 
							(1, 1, true, '2022-11-30 11:45:56'), (1, 1, false, '2022-11-30 11:53:56'), 
							(1, 1, true, '2022-11-30 15:45:56'), (1, 1, false, '2022-11-30 15:55:56'), 
							(1, 1, true, '2022-11-30 16:45:56'), (1, 1, false, '2022-11-30 16:46:56'), 
							(1, 1, true, '2022-11-30 17:45:56'), (1, 1, false, '2022-11-30 17:55:56'), 
                            
                            
							(1, 1, true, '2022-12-01 12:45:56'), (1, 1, false, '2022-12-01 12:46:56'), 
							(1, 1, true, '2022-12-01 13:45:56'), (1, 1, false, '2022-12-01 13:50:56'), 
							(1, 1, true, '2022-12-01 14:45:56'), (1, 1, false, '2022-12-01 14:50:56'), 
							(1, 1, true, '2022-12-01 15:45:56'), (1, 1, false, '2022-12-01 15:50:56'), 
							(1, 1, true, '2022-12-01 16:45:56'), (1, 1, false, '2022-12-01 16:55:56'), 
							(1, 1, true, '2022-12-01 17:45:56'), (1, 1, false, '2022-12-01 17:55:56'), 
                            
                            
							(1, 1, true, '2022-12-02 10:45:56'), (1, 1, false, '2022-12-02 10:48:56'), 
							(1, 1, true, '2022-12-02 11:45:56'), (1, 1, false, '2022-12-02 11:50:56'), 
							(1, 1, true, '2022-12-02 12:45:56'), (1, 1, false, '2022-12-02 12:55:56'), 
							(1, 1, true, '2022-12-02 13:45:56'), (1, 1, false, '2022-12-02 13:46:56'), 
							(1, 1, true, '2022-12-02 14:45:56'), (1, 1, false, '2022-12-02 14:49:56'), 
							(1, 1, true, '2022-12-02 15:45:56'), (1, 1, false, '2022-12-02 15:55:56'), 
							(1, 1, true, '2022-12-02 16:45:56'), (1, 1, false, '2022-12-02 16:46:56');


INSERT INTO dato_arduino (id_arduino, num_pin, valor, fecha) VALUES 
							(2, 0, true, '2022-01-17 10:46:56'), (2, 0, false, '2022-01-17 10:47:56'),
							(2, 0, true, '2022-01-17 10:46:56'), (2, 0, false, '2022-01-17 10:47:56'),
							(2, 0, true, '2022-01-17 10:46:56'), (2, 0, false, '2022-01-17 10:47:56'),
							(2, 0, true, '2022-01-17 10:46:56'), (2, 0, false, '2022-01-17 10:47:56'),
							(2, 0, true, '2022-01-17 10:46:56'), (2, 0, false, '2022-01-17 10:47:56'),
							(2, 0, true, '2022-01-17 10:46:56'), (2, 0, false, '2022-01-17 10:47:56'),
							(2, 0, true, '2022-01-17 10:46:56'), (2, 0, false, '2022-01-17 10:47:56'),
							(2, 0, true, '2022-01-17 10:46:56'), (2, 0, false, '2022-01-17 10:47:56'),
                            
							(2, 0, true, '2022-02-17 10:46:56'), (2, 0, false, '2022-02-17 10:47:56'),
							(2, 0, true, '2022-02-17 10:46:56'), (2, 0, false, '2022-02-17 10:47:56'),
							(2, 0, true, '2022-02-17 10:46:56'), (2, 0, false, '2022-02-17 10:47:56'),
							(2, 0, true, '2022-02-17 10:46:56'), (2, 0, false, '2022-02-17 10:47:56'),
                            
							(2, 0, true, '2022-03-17 10:46:56'), (2, 0, false, '2022-03-17 10:47:56'),
							(2, 0, true, '2022-03-17 10:46:56'), (2, 0, false, '2022-03-17 10:47:56'),
							(2, 0, true, '2022-03-17 10:46:56'), (2, 0, false, '2022-03-17 10:47:56'),
							(2, 0, true, '2022-03-17 10:46:56'), (2, 0, false, '2022-03-17 10:47:56'),
							(2, 0, true, '2022-03-17 10:46:56'), (2, 0, false, '2022-03-17 10:47:56'),
							(2, 0, true, '2022-03-17 10:46:56'), (2, 0, false, '2022-03-17 10:47:56'),
							(2, 0, true, '2022-03-17 10:46:56'), (2, 0, false, '2022-03-17 10:47:56'),
                            
							(2, 0, true, '2022-04-17 10:46:56'), (2, 0, false, '2022-04-17 10:47:56'),
							(2, 0, true, '2022-04-17 10:46:56'), (2, 0, false, '2022-04-17 10:47:56'),
							(2, 0, true, '2022-04-17 10:46:56'), (2, 0, false, '2022-04-17 10:47:56'),
							(2, 0, true, '2022-04-17 10:46:56'), (2, 0, false, '2022-04-17 10:47:56'),
							(2, 0, true, '2022-04-17 10:46:56'), (2, 0, false, '2022-04-17 10:47:56'),
							(2, 0, true, '2022-04-17 10:46:56'), (2, 0, false, '2022-04-17 10:47:56'),
							(2, 0, true, '2022-04-17 10:46:56'), (2, 0, false, '2022-04-17 10:47:56'),
							(2, 0, true, '2022-04-17 10:46:56'), (2, 0, false, '2022-04-17 10:47:56'),
							(2, 0, true, '2022-04-17 10:46:56'), (2, 0, false, '2022-04-17 10:47:56'),
							(2, 0, true, '2022-04-17 10:46:56'), (2, 0, false, '2022-04-17 10:47:56'),
                            
							(2, 0, true, '2022-05-17 10:46:56'), (2, 0, false, '2022-05-17 10:47:56'),
							(2, 0, true, '2022-05-17 10:46:56'), (2, 0, false, '2022-05-17 10:47:56'),
							(2, 0, true, '2022-05-17 10:46:56'), (2, 0, false, '2022-05-17 10:47:56'),
							(2, 0, true, '2022-05-17 10:46:56'), (2, 0, false, '2022-05-17 10:47:56'),
							(2, 0, true, '2022-05-17 10:46:56'), (2, 0, false, '2022-05-17 10:47:56'),
                            
                            
							(2, 0, true, '2022-06-17 10:46:56'), (2, 0, false, '2022-06-17 10:47:56'),
							(2, 0, true, '2022-06-17 10:46:56'), (2, 0, false, '2022-06-17 10:47:56'),
							(2, 0, true, '2022-06-17 10:46:56'), (2, 0, false, '2022-06-17 10:47:56'),
							(2, 0, true, '2022-06-17 10:46:56'), (2, 0, false, '2022-06-17 10:47:56'),
							(2, 0, true, '2022-06-17 10:46:56'), (2, 0, false, '2022-06-17 10:47:56'),
                            
                            
							(2, 0, true, '2022-07-17 10:46:56'), (2, 0, false, '2022-07-17 10:47:56'),
							(2, 0, true, '2022-07-17 10:46:56'), (2, 0, false, '2022-07-17 10:47:56'),
							(2, 0, true, '2022-07-17 10:46:56'), (2, 0, false, '2022-07-17 10:47:56'),
							(2, 0, true, '2022-07-17 10:46:56'), (2, 0, false, '2022-07-17 10:47:56'),
							(2, 0, true, '2022-07-17 10:46:56'), (2, 0, false, '2022-07-17 10:47:56'),
							(2, 0, true, '2022-07-17 10:46:56'), (2, 0, false, '2022-07-17 10:47:56'),
							(2, 0, true, '2022-07-17 10:46:56'), (2, 0, false, '2022-07-17 10:47:56'),
							(2, 0, true, '2022-07-17 10:46:56'), (2, 0, false, '2022-07-17 10:47:56'),
							(2, 0, true, '2022-07-17 10:46:56'), (2, 0, false, '2022-07-17 10:47:56'),
							(2, 0, true, '2022-07-17 10:46:56'), (2, 0, false, '2022-07-17 10:47:56'),
                            
                            
							(2, 0, true, '2022-08-17 10:46:56'), (2, 0, false, '2022-08-17 10:47:56'),
							(2, 0, true, '2022-08-17 10:46:56'), (2, 0, false, '2022-08-17 10:47:56'),
							(2, 0, true, '2022-08-17 10:46:56'), (2, 0, false, '2022-08-17 10:47:56'),
							(2, 0, true, '2022-08-17 10:46:56'), (2, 0, false, '2022-08-17 10:47:56'),
							(2, 0, true, '2022-08-17 10:46:56'), (2, 0, false, '2022-08-17 10:47:56'),
							(2, 0, true, '2022-08-17 10:46:56'), (2, 0, false, '2022-08-17 10:47:56'),
							(2, 0, true, '2022-08-17 10:46:56'), (2, 0, false, '2022-08-17 10:47:56'),
							(2, 0, true, '2022-08-17 10:46:56'), (2, 0, false, '2022-08-17 10:47:56'),
							(2, 0, true, '2022-08-17 10:46:56'), (2, 0, false, '2022-08-17 10:47:56'),
							(2, 0, true, '2022-08-17 10:46:56'), (2, 0, false, '2022-08-17 10:47:56'),
							(2, 0, true, '2022-08-17 10:46:56'), (2, 0, false, '2022-08-17 10:47:56'),
                            
                            
							(2, 0, true, '2022-09-17 10:46:56'), (2, 0, false, '2022-09-17 10:47:56'),
							(2, 0, true, '2022-09-17 10:46:56'), (2, 0, false, '2022-09-17 10:47:56'),
							(2, 0, true, '2022-09-17 10:46:56'), (2, 0, false, '2022-09-17 10:47:56'),
							(2, 0, true, '2022-09-17 10:46:56'), (2, 0, false, '2022-09-17 10:47:56'),
							(2, 0, true, '2022-09-17 10:46:56'), (2, 0, false, '2022-09-17 10:47:56'),
                            
                            
							(2, 0, true, '2022-10-17 10:46:56'), (2, 0, false, '2022-10-17 10:47:56'),
							(2, 0, true, '2022-10-17 10:46:56'), (2, 0, false, '2022-10-17 10:47:56'),
							(2, 0, true, '2022-10-17 10:46:56'), (2, 0, false, '2022-10-17 10:47:56'),
							(2, 0, true, '2022-10-17 10:46:56'), (2, 0, false, '2022-10-17 10:47:56'),
							(2, 0, true, '2022-10-17 10:46:56'), (2, 0, false, '2022-10-17 10:47:56'),
                            
                            
							(2, 0, true, '2022-11-17 10:46:56'), (2, 0, false, '2022-11-17 10:47:56'),
							(2, 0, true, '2022-11-17 10:46:56'), (2, 0, false, '2022-11-17 10:47:56'),
							(2, 0, true, '2022-11-17 10:46:56'), (2, 0, false, '2022-11-17 10:47:56'),
							(2, 0, true, '2022-11-17 10:46:56'), (2, 0, false, '2022-11-17 10:47:56'),
                            
                            
							(2, 0, true, '2022-12-02 10:46:56'), (2, 0, false, '2022-12-02 10:47:56'),
							(2, 0, true, '2022-12-02 10:46:56'), (2, 0, false, '2022-12-02 10:47:56'),
							(2, 0, true, '2022-12-02 10:46:56'), (2, 0, false, '2022-12-02 10:46:56'),
							(2, 0, true, '2022-12-02 10:46:56'), (2, 0, false, '2022-12-02 10:47:56'),
							(2, 0, true, '2022-12-02 10:46:56'), (2, 0, false, '2022-12-02 10:47:56'),
							(2, 0, true, '2022-12-02 10:46:56'), (2, 0, false, '2022-12-02 10:47:56'),
							(2, 0, true, '2022-12-02 10:46:56'), (2, 0, false, '2022-12-02 10:47:56'),
							(2, 0, true, '2022-12-02 10:46:56'), (2, 0, false, '2022-12-02 10:47:56'),
							(2, 0, true, '2022-12-02 10:46:56'), (2, 0, false, '2022-12-02 10:47:56');



SELECT * FROM arduinos;
SELECT * FROM dato_arduino;

SELECT * FROM dato_arduino
	WHERE id_dato IN 
    (SELECT MAX(id_dato) FROM dato_arduino 
		WHERE id_arduino =2 
        GROUP BY num_pin);
        

/*DROP TABLE dato_arduino;
DROP TABLE arduinos;*/
        
